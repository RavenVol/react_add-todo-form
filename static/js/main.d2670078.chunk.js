(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(21)},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(11),s=n.n(r),l=n(12),c=n(2),d=n.n(c),u=n(1),i=n(9),m=n(3),h=n(4),p=n(6),f=n(5),b=n(7),C=function(){var e=Object(i.a)(d.a.mark(function e(t){var n,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(e){return a.a.createElement("tr",null,a.a.createElement("td",{className:e.todo.completed?"done clickable":"undone clickable",onClick:function(){return t=e.todo.id,void e.handle(t);var t}},e.todo.completed?"Done":""),a.a.createElement("td",{className:e.todo.completed?"done":"undone"},e.todo.title),a.a.createElement("td",{className:e.todo.completed?"done":"undone",title:"\n          ".concat(e.todo.user.name,"\n          Phone: ").concat(e.todo.user.phone,"\n          E-Mail: ").concat(e.todo.user.email,"\n          Company: ").concat(e.todo.user.company.name)},e.todo.user.name),a.a.createElement("td",{className:e.todo.completed?"done":"undone"},e.todo.user.email))},v=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).rerender=function(){n.state.todos.length!==n.props.todos.length&&n.setState({todos:Object(u.a)(n.props.todos),sortedTodos:Object(u.a)(n.props.todos),sortBy:"id",reverse:!1})},n.handleSort=function(e){var t,o=[],a=!1;if(e===n.state.sortBy)o=Object(u.a)(n.state.sortedTodos).reverse(),a=!n.state.reverse;else{switch(e){case"status":t=function(e,t){return e.completed-t.completed};break;case"title":t=function(e,t){return e.title.localeCompare(t.title)};break;case"name":t=function(e,t){return e.user.name.localeCompare(t.user.name)};break;case"email":t=function(e,t){return e.user.email.localeCompare(t.user.email)};break;default:t=function(e,t){return e.id-t.id}}o=Object(u.a)(n.state.todos).sort(t)}n.setState(function(){return{sortedTodos:Object(u.a)(o),sortBy:e,reverse:a}})},n.titleResolver=function(e){return e===n.state.sortBy?n.state.reverse?e.toUpperCase()+" "+String.fromCharCode(8657):e.toUpperCase()+" "+String.fromCharCode(8659):e.toUpperCase()+" "+String.fromCharCode(8661)},n.handleTodoStatusChange=function(e){n.props.handleFunction(e)},n.doneCount=function(){for(var e=0,t=0;t<n.state.sortedTodos.length;t++)n.state.sortedTodos[t].completed&&e++;return e},n.usersCount=function(){return n.state.sortedTodos.map(function(e){return e.user.id}).sort(function(e,t){return e-t}).filter(function(e,t,n){return e!==n[t+1]}).length},n.state={todos:Object(u.a)(e.todos),sortedTodos:Object(u.a)(e.todos),sortBy:"id",reverse:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.rerender(),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{onClick:function(){return e.handleSort("status")}},this.titleResolver("status")),a.a.createElement("th",{onClick:function(){return e.handleSort("title")}},this.titleResolver("title")),a.a.createElement("th",{onClick:function(){return e.handleSort("name")}},this.titleResolver("name")),a.a.createElement("th",{onClick:function(){return e.handleSort("email")}},this.titleResolver("email")))),a.a.createElement("tbody",null,this.state.sortedTodos.map(function(t){return a.a.createElement(E,{todo:t,key:t.id,handle:e.handleTodoStatusChange})})),a.a.createElement("tfoot",null,a.a.createElement("tr",null,a.a.createElement("td",{className:"tableFoot"},"Total"),a.a.createElement("td",{className:"tableFoot"},"Done : ",this.doneCount(),"\xa0\xa0\xa0\xa0\xa0|\xa0\xa0\xa0\xa0\xa0 UnDone : ",this.state.sortedTodos.length-this.doneCount()),a.a.createElement("td",{className:"tableFoot"},"Unique Users : ",this.usersCount()),a.a.createElement("td",{className:"tableFoot"}))))}}]),t}(a.a.Component),g=(n(20),n(8)),j=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).setChanges=function(e){var t=e.target,o=t.value,a=t.name,r=o;switch(a){case"title":r=r.replace(/[^\w\u0410-\u042f\u0430-\u044f\u0401\u0451 .,?!@$#%&*()-]/g,"");break;case"userId":r=+r;break;default:r=r.replace(/[`]/g,"")}n.setState(function(e){var t;return t={},Object(g.a)(t,a,r),Object(g.a)(t,"showErrors",!1),t})},n.state={title:"",userId:0,showErrors:!0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("form",null,a.a.createElement("fieldset",null,a.a.createElement("legend",null,"Add ToDo"),a.a.createElement("label",null,"Who are You?\xa0",a.a.createElement("select",{name:"userId",value:this.state.userId,onChange:this.setChanges},a.a.createElement("option",{value:"0"},"Choose a user"),"Choose a user",this.props.users.map(function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)}))),"\xa0\xa0\xa0\xa0",a.a.createElement("label",null,"What sould be Done?\xa0",a.a.createElement("input",{name:"title",type:"text",value:this.state.title,onChange:this.setChanges})),a.a.createElement("br",null),this.props.errors&&this.state.showErrors&&a.a.createElement("p",{className:"errorSign"},this.props.errors),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.closing()}},"Close"),"\xa0\xa0\xa0\xa0",a.a.createElement("button",{onClick:function(t){t.preventDefault(),e.setState({showErrors:!0}),e.props.adding(e.state.userId,e.state.title)}},"Save")))}}]),t}(a.a.Component),O=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).handleBtnClick=Object(i.a)(d.a.mark(function t(){var n,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(function(){return{loadBtn:"Loading ..."}}),t.next=3,C("https://jsonplaceholder.typicode.com/users");case 3:return n=t.sent,t.next=6,C("https://jsonplaceholder.typicode.com/todos");case 6:o=t.sent,e.setState(function(){return{users:Object(u.a)(n),todos:Object(u.a)(o),lastTodoId:Object(u.a)(o).sort(function(e,t){return e.id-t.id})[o.length-1].id}}),e.createTodosWithUsers(),e.setState(function(){return{loadBtn:"Done"}});case 10:case"end":return t.stop()}},t)})),e.createTodosWithUsers=function(){e.setState({todosWithUsers:e.state.todos.map(function(t){return Object(l.a)({},t,{user:e.state.users.find(function(e){return e.id===t.userId})})})})},e.handleTodoStatusChange=function(t){return e.setState(function(e){return{todosWithUsers:e.todosWithUsers.map(function(e){return e.completed=e.id===t?!e.completed:e.completed,e}),todos:e.todos.map(function(e){return e.completed=e.id===t?!e.completed:e.completed,e})}})},e.handleFormClose=function(){e.setState({addingComment:!1})},e.handleFormAdd=function(){var t=Object(i.a)(d.a.mark(function t(n,o){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",a+=0===n?"Choose a user.":"",""===(a+=""===o?" Fill out a ToDo field.":"")){t.next=7;break}e.setState({errors:a}),t.next=10;break;case 7:return t.next=9,e.setState(function(e){return{todos:[].concat(Object(u.a)(e.todos),[{userId:n,id:e.lastTodoId+1,title:o,completed:!1}]),lastTodoId:e.lastTodoId+1,addingComment:!1,errors:""}});case 9:e.createTodosWithUsers();case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),e.state={loadBtn:"!!! Load !!!",users:[],todos:[],todosWithUsers:[],lastTodoId:null,addingComment:!1,errors:""},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Dynamic list of\xa0",this.state.todos[0]?this.state.todos.length:null,"\xa0todos\xa0","!!! Load !!!"===this.state.loadBtn?null:"- ".concat(this.state.loadBtn)),"Done"===this.state.loadBtn?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"addTodoBtn",onClick:function(){return e.setState(function(e){return{addingComment:!e.addingComment}})}},"Add ToDo"),this.state.addingComment&&a.a.createElement(j,{closing:this.handleFormClose,users:this.state.users,adding:this.handleFormAdd,errors:this.state.errors}),a.a.createElement(v,{todos:this.state.todosWithUsers,handleFunction:this.handleTodoStatusChange})):a.a.createElement("button",{onClick:this.handleBtnClick},this.state.loadBtn))}}]),t}(a.a.Component);s.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.d2670078.chunk.js.map